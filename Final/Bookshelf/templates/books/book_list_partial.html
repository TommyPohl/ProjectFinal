<div class="row">
  {% for book in books %}
    <div class="col-md-3 mb-3">
      <a href="{% url 'book-detail' book.pk %}" class="book-card">
        <div class="card-body d-flex flex-column justify-content-center align-items-center">
          <h5 class="book-title">{{ book.title }}</h5>
          <p class="book-author">{{ book.author }}</p>

          {% if book.avg_rating %}
            {% with rating=book.avg_rating %}
              <p class="text-warning mb-0 mt-2">
                {% for _ in "12345" %}
                  {% if rating >= forloop.counter %}⭐{% else %}☆{% endif %}
                {% endfor %}
                ({{ rating|floatformat:1 }}★)
              </p>
            {% endwith %}
          {% else %}
            <p class="text-muted mt-2 mb-0">Zatím nehodnoceno</p>
          {% endif %}
        </div>
      </a>
    </div>
  {% empty %}
    <p class="text-muted">Žádné knihy nejsou k dispozici.</p>
  {% endfor %}
</div>
